<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ูุณูู ูุงูู ุจุฑู - ูููุงุช ุจู ุฅู ุณุจูุฑุช</title>
    
    <!-- CSS Libraries -->
    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/notifications.css">
    
    <style>
        /* ุฃููุงุท ุฅุถุงููุฉ */
        .notification-item {
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .notification-item:hover {
            background: rgba(101, 79, 212, 0.2) !important;
            transform: translateX(-5px);
        }
        
        .notification-item.unread {
            border-right: 3px solid #FF5200 !important;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="header-title">
            <a href="index.html" class="text-box">
                <span>ูุณูู ูุงูู ุจุฑู TV</span>
            </a>
        </div>
    </header>
    
    <!-- Notifications System -->
    <div class="notifications-container">
        <div id="notificationsDropdown" class="notifications-dropdown">
            <div class="notifications-header">
                <h5><i class="uil uil-bell"></i> ุงูุฅุดุนุงุฑุงุช</h5>
                <button class="btn btn-sm" onclick="toggleNotifications()">
                    <i class="uil uil-times"></i>
                </button>
            </div>
            <div id="notificationsList" class="notifications-list">
                <div class="text-center py-3">
                    <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">ุฌุงุฑู ุงูุชุญููู...</span>
                    </div>
                    <p class="mt-2">ุฌุงุฑู ุชุญููู ุงูุฅุดุนุงุฑุงุช...</p>
                    <small>ูุชู ุงูุชุญูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช</small>
                </div>
            </div>
            <div class="notifications-footer">
                <a href="#" onclick="markAllAsRead()">ุชุญุฏูุฏ ุงููู ูููุฑูุก</a>
                <span style="margin: 0 10px; color: #b8d4f5">|</span>
                <a href="#" onclick="reloadNotifications()">ุฅุนุงุฏุฉ ุชุญููู</a>
            </div>
        </div>
        
        <!-- Notifications Button -->
        <button class="notifications-btn" onclick="toggleNotifications()">
            <i class="uil uil-bell"></i>
            <span id="unreadCount" class="unread-badge" style="display: none;">0</span>
        </button>
    </div>
    
    <!-- Main Content -->
    <div class="content">
        <h1 class="page-title">ุฃูุณุงู ุงููููุงุช ุงููุชุงุญุฉ</h1>
        <div class="welcome-message">
            ูู ุชุทุจูู ูุณูู ูุงูู ุจุฑู
        </div>
        
        <!-- Sections Grid -->
        <div id="sectionsContainer" class="sections-container">
            <div class="loading">
                <div class="spinner-border text-primary mb-3" role="status">
                    <span class="visually-hidden">ุฌุงุฑู ุงูุชุญููู...</span>
                </div>
                <p>ุฌุงุฑู ุชุญููู ุงูุฃูุณุงู...</p>
                <small>ูุฑุฌู ุงูุงูุชุธุงุฑ</small>
            </div>
        </div>
    </div>
    
    <!-- Footer -->
    <div class="footer">
        <p class="copyright">ุฌููุน ุงูุญููู ูุญููุธุฉ &copy; <span id="currentYear"></span> ูุณูู ูุงูู ุจุฑู TV</p>
    </div>
    
    <!-- Bottom Navigation -->
    <div class="bottom-nav">
        <a href="index.html" class="nav-item active">
            <i class="uil uil-home"></i>
            <span>ุงูุฑุฆูุณูุฉ</span>
        </a>
        <a href="matches.html" class="nav-item">
            <i class="uil uil-calendar-alt"></i>
            <span>ุฌุฏูู ุงููุจุงุฑูุงุช</span>
        </a>
        <a href="https://t.me/wacelalorshepro" class="nav-item" target="_blank">
            <i class="uil uil-telegram-alt"></i>
            <span>ุชููุฌุฑุงู</span>
        </a>
        <a href="https://play.google.com/store/apps/details?id=com.xpola.player" class="nav-item" target="_blank">
            <i class="uil uil-download-alt"></i>
            <span>ุชุญููู ุงููุดุบู</span>
        </a>
    </div>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Custom JS -->
    <script src="js/main.js"></script>
    <script src="js/firebase-notifications.js"></script>
    
    <!-- Script ูููุธุงุฆู ุงูุนุงูุฉ -->
    <script>
        // ุชุนููู ุงูุณูุฉ ุงูุญุงููุฉ
        document.getElementById('currentYear').textContent = new Date().getFullYear();
        
        // ูุธุงุฆู ุนุงูุฉ ููุงุณุชุฏุนุงุก ูู HTML
        window.toggleNotifications = function() {
            if (window.firebaseNotifications) {
                window.firebaseNotifications.toggleDropdown();
            }
        };
        
        window.markAllAsRead = function() {
            if (window.firebaseNotifications) {
                window.firebaseNotifications.markAllAsRead();
            }
        };
        
        window.reloadNotifications = function() {
            if (window.firebaseNotifications) {
                window.firebaseNotifications.reloadNotifications();
            }
        };
        
        // ุฅุบูุงู ุงููุงุฆูุฉ ุนูุฏ ุงูููุฑ ุฎุงุฑุฌูุง
        document.addEventListener('click', function(event) {
            const dropdown = document.getElementById('notificationsDropdown');
            const button = document.querySelector('.notifications-btn');
            
            if (dropdown && button && 
                !dropdown.contains(event.target) && 
                !button.contains(event.target)) {
                dropdown.classList.remove('show');
            }
        });
        
        // ุงุฎุชุจุงุฑ ูุจุงุดุฑ ูู Firebase
        console.log('=== ุงุฎุชุจุงุฑ Firebase ูู index.html ===');
        
        // ุงุฎุชุจุงุฑ ุงูุงุชุตุงู ุจุนุฏ ุชุญููู ุงูุตูุญุฉ
        setTimeout(async () => {
            console.log('๐ ุฌุงุฑู ุงุฎุชุจุงุฑ ุงุชุตุงู Firebase...');
            
            try {
                if (typeof firebase === 'undefined') {
                    console.error('โ Firebase SDK ุบูุฑ ูุญูู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ');
                    return;
                }
                
                console.log('โ Firebase SDK ูุญูู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ');
                
                // ุงุฎุชุจุงุฑ ุจุณูุท
                const firebaseConfig = {
                    apiKey: "AIzaSyAkgEiYYlmpMe0NLewulheovlTQMz5C980",
                    authDomain: "bein-42f9e.firebaseapp.com",
                    projectId: "bein-42f9e",
                    storageBucket: "bein-42f9e.firebasestorage.app",
                    messagingSenderId: "143741167050",
                    appId: "1:143741167050:web:922d3a0cddb40f67b21b33",
                    measurementId: "G-JH198SKCFS"
                };
                
                let app;
                if (firebase.apps.length === 0) {
                    app = firebase.initializeApp(firebaseConfig);
                    console.log('โ ุชู ุชููุฆุฉ Firebase ูู ุงูุงุฎุชุจุงุฑ');
                } else {
                    app = firebase.apps[0];
                    console.log('โ Firebase ูููุฃ ุจุงููุนู ูู ุงูุงุฎุชุจุงุฑ');
                }
                
                const db = firebase.firestore();
                
                // ุฌูุจ ุนุฏุฏ ุงูุฅุดุนุงุฑุงุช ููุท
                const snapshot = await db.collection('notifications').get();
                console.log(`๐ ุงูุนุฏุฏ ุงูุฅุฌูุงูู ููุฅุดุนุงุฑุงุช ูู Firebase: ${snapshot.size}`);
                
                if (snapshot.size > 0) {
                    console.log('โ ุชูุฌุฏ ุฅุดุนุงุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
                    
                    // ุนุฑุถ ุนูุงููู ุจุนุถ ุงูุฅุดุนุงุฑุงุช
                    snapshot.forEach((doc, index) => {
                        if (index < 3) { // ุฃูู 3 ุฅุดุนุงุฑุงุช ููุท
                            const data = doc.data();
                            console.log(`๐ ${index + 1}. ${data.title || 'ุจุฏูู ุนููุงู'} - ${doc.id}`);
                        }
                    });
                } else {
                    console.log('โน๏ธ ูุง ุชูุฌุฏ ุฅุดุนุงุฑุงุช ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช');
                }
                
            } catch (error) {
                console.error('โ ูุดู ุงุฎุชุจุงุฑ Firebase:', error.message);
            }
        }, 2000);
    </script>
</body>
</html>
